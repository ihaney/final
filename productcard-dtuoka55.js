import{u,e as g,j as s,B as v,a as i,s as o,V as c}from"./index-DscStW3j.js";function y({product:e}){const l=u(),{data:n=[],toggleSavedItem:d}=g(),a=n.some(r=>r.id===e.id),m=async()=>{i.trackEvent("product_click",{props:{product_id:e.id,product_name:e.name,product_category:e.category,product_country:e.country,product_supplier:e.supplier,product_source:e.marketplace,product_price:e.Product_Price}});try{await o.rpc("record_product_view",{product_id:e.id})}catch(r){console.error("Error recording product view:",r)}l(`/product/${e.id}`)},x=async r=>{r.stopPropagation();try{const{data:{session:t}}=await o.auth.getSession();if(!t){c.error("Please log in to save items");return}await d(e),c.success(a?"Item removed from saved items":"Item saved successfully"),i.trackEvent(a?"item_unsaved":"item_saved",{props:{product_id:e.id,product_name:e.name}})}catch(t){console.error("Error saving item:",t),c.error("Failed to save item. Please try again.")}};return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"cursor-pointer",onClick:m,children:[s.jsx("div",{className:"aspect-square overflow-hidden rounded-lg bg-gray-800/50 backdrop-blur-sm",children:s.jsx("img",{src:e.image,alt:e.name,className:"h-full w-full object-cover object-center group-hover:opacity-75 transition-opacity"})}),s.jsxs("div",{className:"mt-4 flex flex-col min-h-[6rem]",children:[s.jsx("h3",{className:"text-sm text-gray-100 mb-2 line-clamp-2",children:e.name}),s.jsxs("div",{className:"mt-auto space-y-2",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("p",{className:"text-lg font-medium text-[#F4A024]",children:e.Product_Price})}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-xs px-2 py-1 bg-gray-800 rounded-full text-gray-300 inline-block text-center",children:e.category}),s.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-800 rounded-full text-gray-300 inline-block text-center",children:[e.marketplace," â€¢ ",e.country]})]})]})]})]}),s.jsxs("button",{onClick:x,className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${a?"bg-gray-800/80 text-[#F4A024]":"bg-gray-800/80 text-gray-300 hover:text-[#F4A024]"}`,children:[s.jsx(v,{className:"w-5 h-5",fill:a?"currentColor":"none"}),s.jsx("span",{className:"sr-only",children:a?"Remove from saved":"Save item"})]})]})}export{y as P};
