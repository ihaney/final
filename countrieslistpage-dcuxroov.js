import{r as a,u as C,j as t,L as _,s as n}from"./index-DscStW3j.js";import{S as j}from"./SEO-6FDy1d8K.js";import{A as y}from"./arrow-left-5Ry7Ws-8.js";function w(){const[s,l]=a.useState([]),[u,p]=a.useState(!0),i=C();a.useEffect(()=>{async function e(){try{const{data:r,error:c}=await n.from("Countries").select("Country_ID, Country_Title, Country_Image");if(c)throw c;const g=await Promise.all((r||[]).map(async o=>{const[{count:h},{count:f}]=await Promise.all([n.from("Products").select("*",{count:"exact",head:!0}).eq("Product_Country_ID",o.Country_ID),n.from("Supplier").select("*",{count:"exact",head:!0}).eq("Supplier_Country_ID",o.Country_ID)]);return{...o,product_count:h||0,supplier_count:f||0}}));l(g)}catch(r){console.error("Error fetching countries:",r)}finally{p(!1)}}e()},[]);const d=e=>{i(`/search?country=${e}`)},m=s.reduce((e,r)=>e+r.product_count,0),x=s.reduce((e,r)=>e+r.supplier_count,0);return u?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(_,{})}):t.jsxs(t.Fragment,{children:[t.jsx(j,{title:"Latin American Countries",description:`Explore products and suppliers from ${s.length} Latin American countries. Browse ${m.toLocaleString()} products from ${x.toLocaleString()} verified suppliers.`,keywords:`Latin American countries, ${s.map(e=>e.Country_Title).join(", ")}, international trade, B2B marketplace`}),t.jsx("div",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("button",{onClick:()=>i(-1),className:"inline-flex items-center text-[#F4A024] hover:text-[#F4A024]/80 mb-8",children:[t.jsx(y,{className:"w-5 h-5 mr-2"}),"Back"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-100 mb-8",children:"Countries"}),t.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(e=>t.jsxs("div",{onClick:()=>d(e.Country_ID),className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-6 cursor-pointer hover:bg-gray-700/50 transition-all",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.Country_Image&&t.jsx("img",{src:e.Country_Image,alt:e.Country_Title,className:"w-12 h-12 object-contain rounded-full"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:e.Country_Title})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-400",children:[e.product_count," ",e.product_count===1?"product":"products"]}),t.jsxs("p",{className:"text-sm text-gray-400",children:[e.supplier_count," ",e.supplier_count===1?"supplier":"suppliers"]})]})]},e.Country_ID))})]})})]})}export{w as default};
