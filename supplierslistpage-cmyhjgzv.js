import{c as v,r as c,u as L,j as e,L as b,s as p}from"./index-DscStW3j.js";import{S as A}from"./SEO-6FDy1d8K.js";import{A as F}from"./arrow-left-5Ry7Ws-8.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=v("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);function P(){const[u,g]=c.useState([]),[h,C]=c.useState(!0),[n,j]=c.useState("name"),[d,x]=c.useState("asc"),y=L();c.useEffect(()=>{async function t(){try{const{data:s,error:a}=await p.from("Supplier").select(`
            Supplier_ID,
            Supplier_Title,
            Supplier_Category_ID,
            Supplier_Source_ID,
            Supplier_Country_ID,
            Countries!fk_supplier_country (Country_Title)
          `);if(a)throw a;const o=[...new Set((s||[]).map(r=>r.Supplier_Source_ID))],{data:l}=await p.from("Sources").select("Source_ID, Source_Title").in("Source_ID",o),D=(l||[]).reduce((r,i)=>(r[i.Source_ID]=i.Source_Title,r),{}),N=[...new Set((s||[]).map(r=>r.Supplier_Category_ID))],{data:T}=await p.from("Categories").select("Category_ID, Category_Title").in("Category_ID",N),I=(T||[]).reduce((r,i)=>(r[i.Category_ID]=i.Category_Title,r),{}),k=await Promise.all((s||[]).map(async r=>{var S;const{count:i}=await p.from("Products").select("*",{count:"exact",head:!0}).eq("Product_Supplier_ID",r.Supplier_ID);return{Supplier_ID:r.Supplier_ID,Supplier_Title:r.Supplier_Title,Country_Title:((S=r.Countries)==null?void 0:S.Country_Title)||"Unknown",Source_Title:D[r.Supplier_Source_ID]||"Unknown",Supplier_Category_ID:r.Supplier_Category_ID,Category_Title:I[r.Supplier_Category_ID]||"Unknown",product_count:i||0}}));g(k)}catch(s){console.error("Error fetching suppliers:",s)}finally{C(!1)}}t()},[]);const w=t=>{n===t?x(d==="asc"?"desc":"asc"):(j(t),x("asc"))},f=[...u].sort((t,s)=>{let a,o;switch(n){case"name":a=t.Supplier_Title.toLowerCase(),o=s.Supplier_Title.toLowerCase();break;case"industry":a=t.Category_Title.toLowerCase(),o=s.Category_Title.toLowerCase();break;case"country":a=t.Country_Title.toLowerCase(),o=s.Country_Title.toLowerCase();break;case"source":a=t.Source_Title.toLowerCase(),o=s.Source_Title.toLowerCase();break;case"products":a=t.product_count,o=s.product_count;break;default:return 0}const l=a<o?-1:a>o?1:0;return d==="asc"?l:-l}),m=[...new Set(u.map(t=>t.Country_Title))],_=[...new Set(u.map(t=>t.Category_Title))];return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(b,{})}):e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Latin American Suppliers Directory",description:`Browse our directory of verified Latin American suppliers from ${m.join(", ")}. Find suppliers across ${_.join(", ")} and more.`,keywords:`Latin American suppliers, wholesale suppliers, ${m.join(", ")}, ${_.join(", ")}, B2B suppliers`}),e.jsx("div",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("button",{onClick:()=>y(-1),className:"inline-flex items-center text-[#F4A024] hover:text-[#F4A024]/80 mb-8",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Our Suppliers"}),e.jsx("div",{className:"flex gap-4",children:["name","industry","country","source","products"].map(t=>e.jsxs("button",{onClick:()=>w(t),className:`flex items-center gap-1 px-3 py-1 rounded-md transition-colors ${n===t?"bg-[#F4A024] text-gray-900":"bg-gray-800/50 text-gray-300 hover:bg-gray-700/50"}`,children:[t.charAt(0).toUpperCase()+t.slice(1),n===t&&e.jsx(E,{className:"w-4 h-4"})]},t))})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/50 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-gray-300",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-gray-300",children:"Industry"}),e.jsx("th",{className:"px-6 py-3 text-gray-300",children:"Country"}),e.jsx("th",{className:"px-6 py-3 text-gray-300",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-gray-300",children:"Products"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:f.map(t=>e.jsxs("tr",{onClick:()=>y(`/supplier/${t.Supplier_Title}`),className:"hover:bg-gray-800/30 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-gray-100",children:t.Supplier_Title}),e.jsx("td",{className:"px-6 py-4 text-gray-300",children:t.Category_Title}),e.jsx("td",{className:"px-6 py-4 text-gray-300",children:t.Country_Title}),e.jsx("td",{className:"px-6 py-4 text-gray-300",children:t.Source_Title}),e.jsx("td",{className:"px-6 py-4 text-gray-300",children:t.product_count})]},t.Supplier_ID))})]})})]})})]})}export{P as default};
