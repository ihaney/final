import{r as i,u as N,j as t,L as w,s as o}from"./index-DscStW3j.js";import{S as P}from"./SEO-6FDy1d8K.js";import{A as b}from"./arrow-left-5Ry7Ws-8.js";function C(){const[s,m]=i.useState([]),[p,x]=i.useState(!0),l=N();i.useEffect(()=>{async function e(){try{const{data:r,error:d}=await o.from("Sources").select("Source_ID, Source_Title, Source_Image");if(d)throw d;const f=await Promise.all((r||[]).map(async c=>{const{count:j}=await o.from("Products").select("*",{count:"exact",head:!0}).eq("Product_Source_ID",c.Source_ID),{data:a}=await o.from("Products").select("Product_Supplier_ID").eq("Product_Source_ID",c.Source_ID),y=new Set(a==null?void 0:a.map(u=>u.Product_Supplier_ID)),{data:n}=await o.from("Products").select("Product_Country_ID").eq("Product_Source_ID",c.Source_ID),I=new Set(n==null?void 0:n.map(u=>u.Product_Country_ID));return{...c,product_count:j||0,supplier_count:y.size,country_count:I.size}}));m(f)}catch(r){console.error("Error fetching sources:",r)}finally{x(!1)}}e()},[]);const S=e=>{l(`/search?source=${e}`)},_=s.reduce((e,r)=>e+r.product_count,0),g=s.reduce((e,r)=>e+r.supplier_count,0),h=s.reduce((e,r)=>e+r.country_count,0);return p?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(w,{})}):t.jsxs(t.Fragment,{children:[t.jsx(P,{title:"Product Sources",description:`Browse Latin American products from ${s.length} trusted sources. Access ${_.toLocaleString()} products from ${g.toLocaleString()} suppliers across ${h} countries.`,keywords:`Latin American marketplaces, ${s.map(e=>e.Source_Title).join(", ")}, B2B sources, wholesale sources`}),t.jsx("div",{className:"pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("button",{onClick:()=>l(-1),className:"inline-flex items-center text-[#F4A024] hover:text-[#F4A024]/80 mb-8",children:[t.jsx(b,{className:"w-5 h-5 mr-2"}),"Back"]}),t.jsx("h1",{className:"text-3xl font-bold text-gray-100 mb-8",children:"Product Sources"}),t.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:s.map(e=>t.jsxs("div",{onClick:()=>S(e.Source_ID),className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-6 cursor-pointer hover:bg-gray-700/50 transition-all",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.Source_Image&&t.jsx("img",{src:e.Source_Image,alt:e.Source_Title,className:"w-12 h-12 object-contain"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-100",children:e.Source_Title})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("p",{className:"text-sm text-gray-400",children:[e.product_count.toLocaleString()," ",e.product_count===1?"product":"products"]}),t.jsxs("p",{className:"text-sm text-gray-400",children:[e.supplier_count.toLocaleString()," ",e.supplier_count===1?"supplier":"suppliers"]}),t.jsxs("p",{className:"text-sm text-gray-400",children:[e.country_count.toLocaleString()," ",e.country_count===1?"country":"countries"]})]})]},e.Source_ID))})]})})]})}export{C as default};
